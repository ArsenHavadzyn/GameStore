@model List<Product>
@{
    var IsCollectionPage = ViewBag.isCollectionPage as bool? ?? false;
}

<div class="container px-4 px-lg-5 mt-5">
    @{ if (!IsCollectionPage) {
    <form method="get" action="@Url.Action("Index", "Catalog")">
        <div class="row mb-4">
            <div class="col-md-3">
                <label for="genre" class="form-label">Жанр</label>
                <select class="form-select" name="genre" id="genre">
                    <option value="">Усі</option>
                    @foreach (var genre in ViewBag.Genres as List<string>)
                    {
                        <option value="@genre">@genre</option>
                    }
                </select>
            </div>

            <div class="col-md-3">
                <label for="price" class="form-label">Ціна</label>
                <select class="form-select" name="price" id="price">
                    <option value="">Усі</option>
                    <option value="0-10">0 - 10</option>
                    <option value="10-30">10 - 30</option>
                    <option value="30-50">30 - 50</option>
                    <option value="50-100">50 - 100</option>
                    <option value="100+">100+</option>
                </select>
            </div>

            <div class="col-md-3">
                <label for="publisher" class="form-label">Видавець</label>
                <select class="form-select" name="publisher" id="publisher">
                    <option value="">Усі</option>
                    @foreach (var publisher in ViewBag.Publishers as List<string>)
                    {
                        <option value="@publisher">@publisher</option>
                    }
                </select>
            </div>

            <div class="col-md-3">
                <label for="platform" class="form-label">Платформа</label>
                <select class="form-select" name="platform" id="platform">
                    <option value="">Усі</option>
                    @if (ViewBag.Platforms != null)
                    {
                        @foreach (var platform in ViewBag.Platforms as List<string>)
                        {
                            <option value="@platform">@platform</option>
                        }
                    }
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-outline-dark">Застосувати фільтри</button>
    </form>
    }
    }

    <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center mt-4">
        @foreach (var product in Model)
        {
            <div class="col mb-4">
                <div class="game-card" onclick="location.href='@Url.Action("Details", "Catalog", new { id = product.Id })'">
                    <img src="@product.ImageUrl" alt="@product.Title">
                    <div class="game-info">
                        <h6 class="mb-1">@product.Title</h6>
                        <p class="small mb-1">Жанр: @product.Genre?.Name</p>
                        <p class="fw-bold small">Ціна: $@product.Price</p>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
